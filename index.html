<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŠã°ã‚ã¡ã‚ƒã‚“ã®ãŠåŠ©ã‘ã‚¢ãƒ—ãƒª</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 10px; background-color: #f0f0f0; display: flex; flex-direction: column; height: 100vh; }
        .button-container { display: flex; flex-direction: column; gap: 15px; height: 60%; }
        button { flex: 1; border: none; border-radius: 20px; font-size: 40px; font-weight: bold; cursor: pointer; box-shadow: 0 8px 0 #999; }
        button:active { transform: translateY(4px); box-shadow: 0 4px 0 #666; }
        .btn-meal { background-color: #FF8C00; color: white; }
        .btn-buy { background-color: #2E8B57; color: white; }
        .btn-call { background-color: #FFD700; color: black; }
        .message-board { margin-top: 20px; padding: 15px; background-color: #fffde7; border: 5px solid #333; border-radius: 15px; height: 35%; overflow-y: auto; }
        #boardMessage { font-size: 36px; font-weight: bold; color: #d32f2f; margin: 10px 0; white-space: pre-wrap; }
        #notification { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(0,0,0,0.9); color: white; padding: 40px; border-radius: 20px; font-size: 40px; text-align: center; z-index: 100; width: 80%; }
    </style>
</head>
<body>
    <div id="notification"></div>
    <div class="button-container">
        <button class="btn-meal" onclick="sendToGas('ğŸš ã”ã¯ã‚“é£Ÿã¹ãŸã‚ˆ')">ğŸš ã”ã¯ã‚“é£Ÿã¹ãŸã‚ˆ</button>
        <button class="btn-buy" onclick="sendToGas('ğŸ¤ ã“ã‚Œè²·ã£ã¦')">ğŸ¤ ã“ã‚Œè²·ã£ã¦</button>
        <button class="btn-call" onclick="sendToGas('ğŸ“ å®¶æ—ã«é›»è©±ã—ãŸã„ã‚ˆ')">ğŸ“ å®¶æ—ã«é›»è©±ã™ã‚‹</button>
    </div>
    <div class="message-board">
        <div style="font-size: 20px; color: #666;">ğŸ  å®¶æ—ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
        <div id="boardMessage">èª­ã¿è¾¼ã¿ä¸­...</div>
    </div>

    <script>
        // â˜…ã“ã“ã«æœ€æ–°ã®GAS URLã‚’è²¼ã‚‹â˜…
        const GAS_URL = "https://script.google.com/macros/s/AKfycbzmPYufMu_AxKUv75WpknfwYUniU8fUclLTFeYIGgbT2HfxL6PlpW5MSMo-HCoywT_5/exec";

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹ãŸã‚ã®é–¢æ•°ï¼ˆå¿…ãšä¸€ç•ªä¸Šã«æ›¸ãï¼‰
        function handleResponse(data) {
            console.log("ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã¾ã—ãŸ:", data);
            if (data && data.message) {
                document.getElementById('boardMessage').innerText = data.message;
            }
        }

        function updateMessage() {
            const oldScript = document.getElementById('jsonp-script');
            if (oldScript) oldScript.remove();
            const script = document.createElement('script');
            script.id = 'jsonp-script';
            script.src = `${GAS_URL}?callback=handleResponse`;
            document.body.appendChild(script);
        }

        async function sendToGas(message) {
            showPopup("å®¶æ—ã«ãŠçŸ¥ã‚‰ã›ã—ã¦ã„ã¾ã™...");
            try {
                await fetch(GAS_URL, {
                    method: 'POST',
                    body: JSON.stringify({ text: message }),
                    headers: { 'Content-Type': 'text/plain' },
                    redirect: "follow"
                });
                showPopup(message + "\nã‚’å®¶æ—ã«é€ã‚Šã¾ã—ãŸï¼");
            } catch (e) { showPopup("é€ä¿¡å¤±æ•—"); }
            setTimeout(hidePopup, 3000);
        }

        function showPopup(t) { const p = document.getElementById('notification'); p.innerText = t; p.style.display = 'block'; }
        function hidePopup() { document.getElementById('notification').style.display = 'none'; }

        // èµ·å‹•æ™‚ã«å®Ÿè¡Œ
        updateMessage();
        // 5åˆ†ã”ã¨ã«å®Ÿè¡Œ
        setInterval(updateMessage, 300000);
    </script>
</body>
</html>